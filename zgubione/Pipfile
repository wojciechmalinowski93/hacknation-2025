# INSTALLATION PROCESS
# pip install -I pipenv==2022.10.12
# pipenv run pip install setuptools"<58"
# pipenv install --dev

[[source]]
url = "https://pypi.org/simple"
verify_ssl = true
name = "pypi"

[packages]
# Base dependencies:
setuptools = "<58"
flatdict = "==4.0.1"
dpath = "==2.2.0"
marshmallow = "==3.9.1"
webargs = "==5.3.1"
pyjwt = "==1.7.1"
querystring-parser = "==1.2.4"
python-magic = "==0.4.27"
rules = "==3.5"
celery = "==5.3.0"
goodtables = {version = "==2.1.4", extras = ["ods"]}
passlib = "==1.7.4"
markdown2 = "==2.5.1"
marshmallow-jsonapi = "==0.24.0"
json-api-doc = "==0.15.0"
gevent = "==24.2.1"
phonenumbers = "==8.13.52"
django = "==2.2.9"
django-constance = {version = "==4.1.3", extras = ["database"]}
django-elasticsearch-dsl = "==6.4.2"
django-redis = "==5.2.0"
# django-suit = {path = "./django_suit-0.2.28-py3-none-any.whl"}
django-localflavor = "==3.1"
django-environ = "==0.11.2"
django-ckeditor = "==6.3.2"
django-nested-admin = "==4.1.1"
django-celery-results = "==2.4.0"
django-celery-beat = "==2.2.1"
django-cache-memoize = "==0.2.0"
django-tqdm = "==1.3.1"
django-modeltrans = "==0.7.3"
django-searchable-encrypted-fields = "==0.1.9"
libarchive-c = "==5.1"
elastic-apm = "==6.23.0"
pyproj = "==3.5.0"
python-logstash = "==0.4.8"
python-mimeparse = "==2.0.0"
pyshacl = "==0.28.1"
pyshp = "==2.3.1"
more-itertools = "==10.5.0"
wagtail = "==2.13.5"
# hypereditor = {path = "./hypereditor-0.1.0-py3-none-any.whl"}
jinja2 = "==3.0.3"
panel = "==0.12.4"
hvplot = "==0.10.0"
pandas = "<1.3" # https://github.com/holoviz/holoviews/issues/5009
django-extensions = "==3.1.5"
django-notifications-hq = "==1.7.0"
falcon-caching = "==1.1.0"
user-agents = "==2.2.0"
pydiscourse = "==1.7.0"
cchardet = "==2.1.7"
tifffile = "==2023.7.10"
falcon-limiter = "==1.0.1"
django-fancy-cache = "==1.1.0"
netcdf4 = "==1.7.2"
wagtailvideos = "==2.11.1"
rarfile = "==4.2"
py7zr = "==0.22.0"
numpy = "==1.23.0"
fake-useragent = "==1.5.1"
bleach = {version = "==6.1.0", extras = ["css"]}
tzlocal = "==5.2.0"
unleashclient = "==5.12.2"
lxml = "==5.3.0"
urllib3 = "==1.26.14"
gunicorn = "==23.0.0"
wheel = "==0.44.0"
falcon = "==4.0.2"
hypercorn = "==0.5.4"
# django-logingovpl = {file = "django_logingovpl-0.0.5-py3-none-any.whl"}
psycopg2-binary = "==2.8.6"
bs4 = "==0.0.2"
celery-progress = "==0.4"
celery-singleton = "==0.3.1"
channels = "==2.4.0"  # Max for django < 3.0
csvwlib = "==0.3.2"
cython = "==3.0.11"
dal-admin-filters = "==1.1.0"
discourse-django-sso = "==0.9.2"
django-admin-confirm = "==0.2.5"  # Max for django 2.2
django-admin-multiple-choice-list-filter = "==0.1.1"
django-admin-rangefilter = "==0.4.0"
django-auditlog = "==1.0.0"
deepdiff = "==8.1.1"
# werkzeug libs
werkzeug = "==0.15.6"
accept-types = "==0.4.1"
# openapi libs
openapi-core = "==0.7.1"
openapi-spec-validator = "==0.2.9"
apispec = "==1.3.3"
# xmlschema
xmlschema = "==3.4.3"
dicttoxml = "==1.7.4"
xmlsec = "==1.3.14"  # newest: xmlsec.Error: (100, 'lxml & xmlsec libxml2 library version mismatch')
# Bokeh
bokeh = "==2.4.2"
jupyter-client = "===7.2.0"
jupyter = "==1.0.0"
jsonschema = "==4.23.0"
taskgroup = "==0.2.1"
prometheus-client = "==0.21.1"
isort = "*"
kombu = "*"
sentry-sdk = {version = "==2.18.0", extras = ["falcon"]}

[dev-packages]
flake8 = "==7.0.0"
pytest = "==6.2.5"
pytest-django = "==4.5.2"
pytest-ordering = "==0.6"
pytest-factoryboy = "==2.7.0"
pytest-mock = "==3.14.0"
namedlist = "==1.8"
pytest-selenium = "==4.0.1"
pytest-bdd = "==5.0.0"
pytest-localserver = "==0.9.0.post0"
pytest-xdist = "==1.32.0"
requests-mock = "==1.7.0"
factory-boy = "==2.12.0"
pytest-cov = "==2.11.1"
pep8 = "==1.7.1"
autopep8 = "==2.2.0"
pylint = "==3.2.7"
jedi = "==0.16.0"
pre-commit = "==3.5.0"
changelog-cli = "==0.6.2"
pipdeptree = "==2.24.0"

[requires]
python_version = "3.8"

[scripts]
services_up = "docker compose up"
init_mcod_db = "python manage.py init_mcod_db"
reindex = "python manage.py search_index --rebuild -f"
validate_resources = "python manage.py validate_resources --async"
admin = "python manage.py runserver 0:8001"
api = "python -m werkzeug.serving --bind 0:8000 --reload --debug mcod.api:app"
cms = "sh -c 'COMPONENT=cms python manage.py runserver 0:8002'"
celery = "sh -c 'COMPONENT=celery python -m celery --app=mcod.celeryapp:app worker -l DEBUG -E -Q default,resources,indexing,periodic,newsletter,notifications,search_history,watchers,harvester,indexing_data,history,graphs,datasets,archiving,reports,discourse,showcases'"
tests = "pytest"
